<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Significant Whitespace | Tamir Bahar</title><meta name=keywords content><meta name=description content="All whitespace is significant.
It might not always matter to your computer, or compiler, or piece of code. But to you, a human reading the code, it is significant.
I often here people complaining about significant whitespace. They say it makes no sense, that it makes working with the code harder. That whitespace, specifically in code, should not be significant. But the unavoidable truth is that whitespace is always significant, regardless of the language you use."><meta name=author content="Tamir Bahar"><link rel=canonical href=https://tamir.dev/posts/significant-whitespace/><link crossorigin=anonymous href=/assets/css/stylesheet.0b7a6a59f13c612205962144f1a8f43a859c4d814d43709a9e3e2b0e9353224b.css integrity="sha256-C3pqWfE8YSIFliFE8aj0OoWcTYFNQ3Canj4rDpNTIks=" rel="preload stylesheet" as=style><link rel=icon href=https://tamir.dev/images/profilepic.jpg><link rel=icon type=image/png sizes=16x16 href=https://tamir.dev/images/profilepic.jpg><link rel=icon type=image/png sizes=32x32 href=https://tamir.dev/images/profilepic.jpg><link rel=apple-touch-icon href=https://tamir.dev/images/profilepic.jpg><link rel=mask-icon href=https://tamir.dev/images/profilepic.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Significant Whitespace"><meta property="og:description" content="All whitespace is significant.
It might not always matter to your computer, or compiler, or piece of code. But to you, a human reading the code, it is significant.
I often here people complaining about significant whitespace. They say it makes no sense, that it makes working with the code harder. That whitespace, specifically in code, should not be significant. But the unavoidable truth is that whitespace is always significant, regardless of the language you use."><meta property="og:type" content="article"><meta property="og:url" content="https://tamir.dev/posts/significant-whitespace/"><meta property="og:image" content="https://tamir.dev/images/profilepic.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-14T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-14T00:00:00+00:00"><meta property="og:site_name" content="Tamir Bahar"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tamir.dev/images/profilepic.jpg"><meta name=twitter:title content="Significant Whitespace"><meta name=twitter:description content="All whitespace is significant.
It might not always matter to your computer, or compiler, or piece of code. But to you, a human reading the code, it is significant.
I often here people complaining about significant whitespace. They say it makes no sense, that it makes working with the code harder. That whitespace, specifically in code, should not be significant. But the unavoidable truth is that whitespace is always significant, regardless of the language you use."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tamir.dev/posts/"},{"@type":"ListItem","position":2,"name":"Significant Whitespace","item":"https://tamir.dev/posts/significant-whitespace/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Significant Whitespace","name":"Significant Whitespace","description":"All whitespace is significant.\nIt might not always matter to your computer, or compiler, or piece of code. But to you, a human reading the code, it is significant.\nI often here people complaining about significant whitespace. They say it makes no sense, that it makes working with the code harder. That whitespace, specifically in code, should not be significant. But the unavoidable truth is that whitespace is always significant, regardless of the language you use.","keywords":[],"articleBody":"All whitespace is significant.\nIt might not always matter to your computer, or compiler, or piece of code. But to you, a human reading the code, it is significant.\nI often here people complaining about significant whitespace. They say it makes no sense, that it makes working with the code harder. That whitespace, specifically in code, should not be significant. But the unavoidable truth is that whitespace is always significant, regardless of the language you use.\nWhitespace Primer Before we talk about its significance, we need to define what whitespace is.\nWe‚Äôll start with the Wikipedia definition of a whitespace character:\n[‚Ä¶] any character or series of characters that represent horizontal or vertical space in typography. When rendered, a whitespace character does not correspond to a visible mark, but typically does occupy an area on a page.\nNext, we‚Äôll divide it into 2 categories - visible and invisible.\nVisible Whitespace Visible whitespace is the whitespace you can see. Indentation, spacing, line breaks‚Ä¶ All of them make for visible whitespace.\nThe words in this line are separated by spaces. This line is indented using 4 spaces. An empty line precedes this line! Invisible Whitespace Invisible whitespace is all the whitespace you can‚Äôt see. This is not because it‚Äôs using different characters, but because it is positioned where it does not directly move other characters.\nThis line ends with 4 spaces. There are 2 line breaks after this line. Since you cannot see it, it‚Äôs hard to make sense of it. This is the source of many complaints.\nIndistinguishable Whitespace In addition to visible and invisible whitespace, there‚Äôs another category. Indistinguishable whitespace.\nThis category includes, for the most part, tabs and spaces.\nHere we indent with 4 spaces. Here we indent with a tab. Since they look the same, but are not the same character, they cause many issues.\nSignificance There are 2 ways for whitespace to be significant. It can be human-significant, meaning that it is significant for the reader; and it can be machine-significant, meaning that it matters to the computer.\nMost (if not all) whitespace complaints stem from disparity between those two concepts. From cases where whitespace is human-significant and not machine-significant, or vice versa.\nGoing forward, we‚Äôll call situations where human- and machine-significance match ‚Äúmatched significance‚Äù, and cases where they do not ‚Äúmismatched significance‚Äù.\nLet‚Äôs look at some examples.\nMatched Significance Plain Text This line has spaces it in. Lines are separated by line breaks. We can have multiple spaces. Or multiple line breaks. With the exception of invisible whitespace (trailing spaces or line breaks), there is no mismatch.\nPython 1 2 def f(): return 1 In Python, whitespace is significant for both the human and the machine in defining scopes. The second line is indented, marking it a part of the function defined on the first line.\nMismatched Significance Markdown 1 2 3 4 5 6 In Markdown, there's some mismatch. The previous line ends with 2 significant spaces. This means that when rendered, it will remain a separate line, while the rest of the lines will get merged. This is not consistent across all variants, making it even worse. Since human readers cannot see the 2 trailing spaces, there‚Äôs a mismatch. We expect one output, but the computer gives us another.\nC 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 static OSStatus SSLVerifySignedServerKeyExchange(SSLContext *ctx, bool isRsa, SSLBuffer signedParams, uint8_t *signature, UInt16 signatureLen) { OSStatus err; ... if ((err = SSLHashSHA1.update(\u0026hashCtx, \u0026serverRandom)) != 0) goto fail; if ((err = SSLHashSHA1.update(\u0026hashCtx, \u0026signedParams)) != 0) goto fail; goto fail; if ((err = SSLHashSHA1.final(\u0026hashCtx, \u0026hashOut)) != 0) goto fail; ... fail: SSLFreeBuffer(\u0026signedHashes); SSLFreeBuffer(\u0026hashCtx); return err; } This is Apple‚Äôs goto-fail bug and it is one of my favourite examples of significant whitespace. In line 12 there‚Äôs a goto fail statement. Due to the indentation (whitespace!) it reads (to the human) as if it belongs in the same block as line 11. But since indentation is insignificant whitespace in C, the computer ignores it.\nTo be more explicit in C‚Äôs syntax, we‚Äôll write it as follows:\n1 2 3 4 if ((err = SSLHashSHA1.update(\u0026hashCtx, \u0026signedParams)) != 0) { goto fail; } goto fail; Making it clear that it will always goto fail.\nI like this example as it is a significant security issue that was (at least in part) caused by whitespace.\nIndistinguishable Hell So we know whitespace is significant. Both to humans and to machines. Taking a look at any code-formatters we‚Äôll also see that people like it that way. If I put these 2 different formatting options for a vote, I‚Äôm pretty sure which one will win:\n1 2 3 4 5 6 7 8 9 void f(int x) { if (x \u003c 10) { printf(\"%d is smaller than 10.\\n\", x); else if { printf(\"%d is 10.\\n\", x); } else { printf(\"%d is larger than 10.\\n\", x); } } 1 2 3 4 5 6 7 8 9 void f(int x) { if (x \u003c 10) { printf(\"%d is smaller than 10.\\n\", x); else if { printf(\"%d is 10.\\n\", x); } else { printf(\"%d is larger than 10.\\n\", x); } } After all, none of us really want to count matching braces.\nSo why does ‚Äúsignificant whitespace‚Äù get so much hate?\nWell, consider the following:\n1 2 3 4 # Python def f(): print(\"Indented using spaces.\") print(\"Indented using tab.\") 1 2 3 # makefile target: echo \"Fail!\" Both of these examples look valid, but they aren‚Äôt. To the naked (human-) eye, they are indistinguishable from valid code. But they mismatch spaces and tabs. Two indistinguishable types of whitespace.\nThis is, as mentioned before, the cause of most of the issues people have with whitespace. They expect it to work, but it doesn‚Äôt. In addition to that, there‚Äôs no meaningful or straightforward way to detect it when you look at the code. It‚Äôs an invisible problem.\nHate The Right Things I am not going to tell you to stop hating significant whitespace. Whitespace hurt you, and that anger needs to be directed somewhere. I will ask you, though, to point it in the right direction.\nVisible, distinguishable whitespace, with matching human- and machine-significance, is a good thing. It helps you make sense of the code, and helps ensure that the computer makes the same kind of sense of it as well.\nInvisible, yet machine-significant whitespace is bad. It leads to surprising outcomes and confuses the human writing the text.\nVisible, yet machine-insignificant whitespace is also bad. It leads to surprising outcomes and is tricky to detect.\nIndistinguishable, yet significant whitespace is the worst. It leads to bugs, errors, and pain. Use whatever tool is available in your toolbox to fight it. Use linters, formatters, and if all else fails - in-editor ‚Äúvisible whitespace‚Äù features. Avoid writing systems that allow it. And remember - the problem with Python is not that indentation is significant, it‚Äôs that tabs are allowed.\n","wordCount":"1161","inLanguage":"en","datePublished":"2023-01-14T00:00:00Z","dateModified":"2023-01-14T00:00:00Z","author":{"@type":"Person","name":"Tamir Bahar"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tamir.dev/posts/significant-whitespace/"},"publisher":{"@type":"Organization","name":"Tamir Bahar","logo":{"@type":"ImageObject","url":"https://tamir.dev/images/profilepic.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tamir.dev/ accesskey=h title="Tamir Bahar (Alt + H)">Tamir Bahar</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tamir.dev/blogvent/ title=blogventüéÑ><span>blogventüéÑ</span></a></li><li><a href=https://tamir.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://tamir.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://tamir.dev/index.xml title=rss><span>rss</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="13"><g transform="scale(1)"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></g></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tamir.dev/>Home</a>&nbsp;¬ª&nbsp;<a href=https://tamir.dev/posts/>Posts</a></div><h1 class=post-title>Significant Whitespace</h1><div class=post-meta><span title='2023-01-14 00:00:00 +0000 UTC'>Jan 14, 2023</span>&nbsp;¬∑&nbsp;Tamir Bahar</div></header><div class=post-content><p>All whitespace is significant.</p><p>It might not always matter to your computer, or compiler, or piece of code.
But to you, a human reading the code, it is significant.</p><p>I often here people complaining about significant whitespace.
They say it makes no sense, that it makes working with the code harder.
That whitespace, specifically in code, should not be significant.
But the unavoidable truth is that whitespace is always significant, regardless of the language you use.</p><h2 id=whitespace-primer><a href=#whitespace-primer>Whitespace Primer<span hidden class=anchor aria-hidden=true href=#whitespace-primer>#</span></a></h2><p>Before we talk about its significance, we need to define what whitespace is.</p><p>We&rsquo;ll start with the <a href=https://en.wikipedia.org/wiki/Whitespace_character>Wikipedia definition of a whitespace character</a>:</p><blockquote><p>[&mldr;] any character or series of characters that represent horizontal or vertical space in typography.
When rendered, a whitespace character does not correspond to a visible mark, but typically does occupy an area on a page.</p></blockquote><p>Next, we&rsquo;ll divide it into 2 categories - visible and invisible.</p><h3 id=visible-whitespace><a href=#visible-whitespace>Visible Whitespace<span hidden class=anchor aria-hidden=true href=#visible-whitespace>#</span></a></h3><p>Visible whitespace is the whitespace you can <em>see</em>.
Indentation, spacing, line breaks&mldr; All of them make for visible whitespace.</p><pre tabindex=0><code>The words in this line are separated by spaces.
    This line is indented using 4 spaces.
    
An empty line precedes this line!
</code></pre><h3 id=invisible-whitespace><a href=#invisible-whitespace>Invisible Whitespace<span hidden class=anchor aria-hidden=true href=#invisible-whitespace>#</span></a></h3><p>Invisible whitespace is all the whitespace you can&rsquo;t see.
This is not because it&rsquo;s using different characters, but because it is positioned where it does not directly move other characters.</p><pre tabindex=0><code>This line ends with 4 spaces.    
There are 2 line breaks after this line.
</code></pre><p>Since you cannot see it, it&rsquo;s hard to make sense of it.
This is the source of many complaints.</p><h3 id=indistinguishable-whitespace><a href=#indistinguishable-whitespace>Indistinguishable Whitespace<span hidden class=anchor aria-hidden=true href=#indistinguishable-whitespace>#</span></a></h3><p>In addition to visible and invisible whitespace, there&rsquo;s another category.
Indistinguishable whitespace.</p><p>This category includes, for the most part, tabs and spaces.</p><pre tabindex=0><code>    Here we indent with 4 spaces.
	Here we indent with a tab.
</code></pre><p>Since they look the same, but are not the same character, they cause many issues.</p><h2 id=significance><a href=#significance>Significance<span hidden class=anchor aria-hidden=true href=#significance>#</span></a></h2><p>There are 2 ways for whitespace to be significant.
It can be human-significant, meaning that it is significant for the reader; and it can be machine-significant, meaning that it matters to the computer.</p><p>Most (if not all) whitespace complaints stem from disparity between those two concepts.
From cases where whitespace is human-significant and not machine-significant, or vice versa.</p><p>Going forward, we&rsquo;ll call situations where human- and machine-significance match &ldquo;matched significance&rdquo;, and cases where they do not &ldquo;mismatched significance&rdquo;.</p><p>Let&rsquo;s look at some examples.</p><h3 id=matched-significance><a href=#matched-significance>Matched Significance<span hidden class=anchor aria-hidden=true href=#matched-significance>#</span></a></h3><h4 id=plain-text><a href=#plain-text>Plain Text<span hidden class=anchor aria-hidden=true href=#plain-text>#</span></a></h4><pre tabindex=0><code>This line has spaces it in.
Lines are separated by line breaks.
We can have     multiple spaces.


Or multiple line breaks.
</code></pre><p>With the exception of invisible whitespace (trailing spaces or line breaks), there is no mismatch.</p><h4 id=python><a href=#python>Python<span hidden class=anchor aria-hidden=true href=#python>#</span></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></td></tr></table></div></div><p>In Python, whitespace is significant for both the human and the machine in defining scopes.
The second line is indented, marking it a part of the function defined on the first line.</p><h3 id=mismatched-significance><a href=#mismatched-significance>Mismatched Significance<span hidden class=anchor aria-hidden=true href=#mismatched-significance>#</span></a></h3><h4 id=markdown><a href=#markdown>Markdown<span hidden class=anchor aria-hidden=true href=#markdown>#</span></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=display:flex><span>In Markdown, there&#39;s some mismatch.  
</span></span><span style=display:flex><span>The previous line ends with 2 significant spaces.
</span></span><span style=display:flex><span>This means that when rendered, it will remain a separate line,
</span></span><span style=display:flex><span>while the rest of the lines will get merged.
</span></span><span style=display:flex><span>This is not consistent across all variants,
</span></span><span style=display:flex><span>making it even worse.
</span></span></code></pre></td></tr></table></div></div><p>Since human readers cannot see the 2 trailing spaces, there&rsquo;s a mismatch.
We expect one output, but the computer gives us another.</p><h4 id=c><a href=#c>C<span hidden class=anchor aria-hidden=true href=#c>#</span></a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>static</span> OSStatus
</span></span><span style=display:flex><span><span style=color:#a6e22e>SSLVerifySignedServerKeyExchange</span>(SSLContext <span style=color:#f92672>*</span>ctx, <span style=color:#66d9ef>bool</span> isRsa, SSLBuffer signedParams,
</span></span><span style=display:flex><span>                                 <span style=color:#66d9ef>uint8_t</span> <span style=color:#f92672>*</span>signature, UInt16 signatureLen)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	OSStatus        err;
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> ((err <span style=color:#f92672>=</span> SSLHashSHA1.update(<span style=color:#f92672>&amp;</span>hashCtx, <span style=color:#f92672>&amp;</span>serverRandom)) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>goto</span> fail;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> ((err <span style=color:#f92672>=</span> SSLHashSHA1.update(<span style=color:#f92672>&amp;</span>hashCtx, <span style=color:#f92672>&amp;</span>signedParams)) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>goto</span> fail;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>goto</span> fail;
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> ((err <span style=color:#f92672>=</span> SSLHashSHA1.final(<span style=color:#f92672>&amp;</span>hashCtx, <span style=color:#f92672>&amp;</span>hashOut)) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>goto</span> fail;
</span></span><span style=display:flex><span>	...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fail:
</span></span><span style=display:flex><span>	SSLFreeBuffer(<span style=color:#f92672>&amp;</span>signedHashes);
</span></span><span style=display:flex><span>	SSLFreeBuffer(<span style=color:#f92672>&amp;</span>hashCtx);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> err;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>This is <a href=https://www.imperialviolet.org/2014/02/22/applebug.html>Apple&rsquo;s goto-fail bug</a> and it is one of my favourite examples of significant whitespace.
In line 12 there&rsquo;s a <code>goto fail</code> statement.
Due to the indentation (whitespace!) it reads (to the human) as if it belongs in the same block as line 11.
But since indentation is insignificant whitespace in C, the computer ignores it.</p><p>To be more explicit in C&rsquo;s syntax, we&rsquo;ll write it as follows:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>if</span> ((err <span style=color:#f92672>=</span> SSLHashSHA1.update(<span style=color:#f92672>&amp;</span>hashCtx, <span style=color:#f92672>&amp;</span>signedParams)) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>0</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>goto</span> fail;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>goto</span> fail;
</span></span></code></pre></td></tr></table></div></div><p>Making it clear that it will <em>always</em> <code>goto fail</code>.</p><p>I like this example as it is a significant security issue that was (at least in part) caused by whitespace.</p><h2 id=indistinguishable-hell><a href=#indistinguishable-hell>Indistinguishable Hell<span hidden class=anchor aria-hidden=true href=#indistinguishable-hell>#</span></a></h2><p>So we know whitespace is significant.
Both to humans and to machines.
Taking a look at any code-formatters we&rsquo;ll also see that people like it that way.
If I put these 2 different formatting options for a vote, I&rsquo;m pretty sure which one will win:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>f</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;%d is smaller than 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> {
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;%d is 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>        printf(<span style=color:#e6db74>&#34;%d is larger than 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>f</span>(<span style=color:#66d9ef>int</span> x) {
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> (x <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>10</span>) {
</span></span><span style=display:flex><span>printf(<span style=color:#e6db74>&#34;%d is smaller than 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> {
</span></span><span style=display:flex><span>printf(<span style=color:#e6db74>&#34;%d is 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span>} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>printf(<span style=color:#e6db74>&#34;%d is larger than 10.</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#34;</span>, x);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>After all, none of us <em>really</em> want to count matching braces.</p><p>So why does &ldquo;significant whitespace&rdquo; get so much hate?</p><p>Well, consider the following:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Python</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>f</span>():
</span></span><span style=display:flex><span>	print(<span style=color:#e6db74>&#34;Indented using spaces.&#34;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Indented using tab.&#34;</span>)
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mak data-lang=mak><span style=display:flex><span><span style=color:#75715e># makefile
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>target</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Fail!&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>Both of these examples <em>look</em> valid, but they aren&rsquo;t.
To the naked (human-) eye, they are indistinguishable from valid code.
But they mismatch spaces and tabs.
Two indistinguishable types of whitespace.</p><p>This is, as mentioned before, the cause of most of the issues people have with whitespace.
They expect it to work, but it doesn&rsquo;t.
In addition to that, there&rsquo;s no meaningful or straightforward way to detect it when you look at the code.
It&rsquo;s an invisible problem.</p><h2 id=hate-the-right-things><a href=#hate-the-right-things>Hate The Right Things<span hidden class=anchor aria-hidden=true href=#hate-the-right-things>#</span></a></h2><p>I am not going to tell you to stop hating significant whitespace.
Whitespace hurt you, and that anger needs to be directed somewhere.
I will ask you, though, to point it in the right direction.</p><p>Visible, distinguishable whitespace, with matching human- and machine-significance, is a good thing.
It helps you make sense of the code, and helps ensure that the computer makes the same kind of sense of it as well.</p><p>Invisible, yet machine-significant whitespace is bad.
It leads to surprising outcomes and confuses the human writing the text.</p><p>Visible, yet machine-insignificant whitespace is also bad.
It leads to surprising outcomes and is tricky to detect.</p><p>Indistinguishable, yet significant whitespace is the worst.
It leads to bugs, errors, and pain.
Use whatever tool is available in your toolbox to fight it.
Use linters, formatters, and if all else fails - in-editor &ldquo;visible whitespace&rdquo; features.
Avoid writing systems that allow it.
And remember - the problem with Python is not that indentation is significant, it&rsquo;s that tabs are allowed.</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://tamir.dev/>Tamir Bahar</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>