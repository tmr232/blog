<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hello CFGBot ü§ñ | Tamir Bahar</title><meta name=keywords content><meta name=description content="A few days ago I created CFGBot - a small Bluesky bot that publishes hourly control-flow-graphs.
While technically simple, this bot is something I wanted to create for a few years now. Originally, I wanted to write one that publishes IDA Pro graphs of random functions in system binaries. But due to logistical issues (how to run a bot that uses software I&rsquo;m only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?"><meta name=author content="Tamir Bahar"><link rel=canonical href=https://tamir.dev/posts/hello-cfgbot/><link crossorigin=anonymous href=/assets/css/stylesheet.0b7a6a59f13c612205962144f1a8f43a859c4d814d43709a9e3e2b0e9353224b.css integrity="sha256-C3pqWfE8YSIFliFE8aj0OoWcTYFNQ3Canj4rDpNTIks=" rel="preload stylesheet" as=style><link rel=icon href=https://tamir.dev/images/profilepic.jpg><link rel=icon type=image/png sizes=16x16 href=https://tamir.dev/images/profilepic.jpg><link rel=icon type=image/png sizes=32x32 href=https://tamir.dev/images/profilepic.jpg><link rel=apple-touch-icon href=https://tamir.dev/images/profilepic.jpg><link rel=mask-icon href=https://tamir.dev/images/profilepic.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=webmention href=https://webmention.io/tamir.dev/webmention><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Hello CFGBot ü§ñ"><meta property="og:description" content="A few days ago I created CFGBot - a small Bluesky bot that publishes hourly control-flow-graphs.
While technically simple, this bot is something I wanted to create for a few years now. Originally, I wanted to write one that publishes IDA Pro graphs of random functions in system binaries. But due to logistical issues (how to run a bot that uses software I&rsquo;m only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?"><meta property="og:type" content="article"><meta property="og:url" content="https://tamir.dev/posts/hello-cfgbot/"><meta property="og:image" content="https://tamir.dev/images/profilepic.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-01T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-01T00:00:00+00:00"><meta property="og:site_name" content="Tamir Bahar"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://tamir.dev/images/profilepic.jpg"><meta name=twitter:title content="Hello CFGBot ü§ñ"><meta name=twitter:description content="A few days ago I created CFGBot - a small Bluesky bot that publishes hourly control-flow-graphs.
While technically simple, this bot is something I wanted to create for a few years now. Originally, I wanted to write one that publishes IDA Pro graphs of random functions in system binaries. But due to logistical issues (how to run a bot that uses software I&rsquo;m only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://tamir.dev/posts/"},{"@type":"ListItem","position":2,"name":"Hello CFGBot ü§ñ","item":"https://tamir.dev/posts/hello-cfgbot/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hello CFGBot ü§ñ","name":"Hello CFGBot ü§ñ","description":"A few days ago I created CFGBot - a small Bluesky bot that publishes hourly control-flow-graphs.\nWhile technically simple, this bot is something I wanted to create for a few years now. Originally, I wanted to write one that publishes IDA Pro graphs of random functions in system binaries. But due to logistical issues (how to run a bot that uses software I\u0026rsquo;m only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?","keywords":[],"articleBody":"A few days ago I created CFGBot - a small Bluesky bot that publishes hourly control-flow-graphs.\nWhile technically simple, this bot is something I wanted to create for a few years now. Originally, I wanted to write one that publishes IDA Pro graphs of random functions in system binaries. But due to logistical issues (how to run a bot that uses software I‚Äôm only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?) I never quite got around to it.\nDespite those roadblocks, I kept wanting to share the visual wonder of control-flow-graphs with the world. And a few days ago it dawned on me that now, after writing my control-flow-graph generator, I can finally make this happen. So I glued some pieces together, and here we are.\nA bit of internals The core of the bot is the function-graph-overview project, used to generate the graphs themselves. To choose what function to show every hour - I pre-process a corpus of source-code (currently - CPython‚Äôs implementation and standard library, but more to come soon!) to get an index of all the functions in it.\nThe index contains basic information:\nLocation of the function (filepath, location in the file) Number of CFG nodes The function definition (this accounts for overloads and anonymous functions better than function names) Then, on every run, I randomly select a function, biased slightly towards higher node-counts, as those are more interesting.\nI then render this function to a PNG image, and post to Bluesky.\nHigh-res images The whole part described above was achieved rather easily (once I had the pieces!) using a bit of Python (to run the scripts and post to Bluesky) and Github-Actions (to ‚Äúhost‚Äù the bot and run it hourly). But there is a problem - Bluesky only supports relatively small images. And control-flow-graphs, especially the cool-looking ones, tend to be very large.\nTo resolve this, I added the /render/ page to function-graph-overview. It takes a GitHub URL (one that includes a line number) as an argument, and renders the SVG in the browser (this way I don‚Äôt need hosting for those images!). I added basic panning and zooming to make it a tad more useful, and an option to download the SVG. Thus solving the fidelity issue with relative ease.\n","wordCount":"390","inLanguage":"en","datePublished":"2025-01-01T00:00:00Z","dateModified":"2025-01-01T00:00:00Z","author":{"@type":"Person","name":"Tamir Bahar"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://tamir.dev/posts/hello-cfgbot/"},"publisher":{"@type":"Organization","name":"Tamir Bahar","logo":{"@type":"ImageObject","url":"https://tamir.dev/images/profilepic.jpg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://tamir.dev/ accesskey=h title="Tamir Bahar (Alt + H)">Tamir Bahar</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://tamir.dev/blogvent/ title=blogventüéÑ><span>blogventüéÑ</span></a></li><li><a href=https://tamir.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://tamir.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://tamir.dev/index.xml title=rss><span>rss</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="13"><g transform="scale(1)"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></g></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://tamir.dev/>Home</a>&nbsp;¬ª&nbsp;<a href=https://tamir.dev/posts/>Posts</a></div><h1 class=post-title>Hello CFGBot ü§ñ</h1><div class=post-meta><span title='2025-01-01 00:00:00 +0000 UTC'>Jan 1, 2025</span>&nbsp;¬∑&nbsp;Tamir Bahar</div></header><div class=post-content><p>A few days ago I created <a href=https://bsky.app/profile/cfgbot.bsky.social>CFGBot</a> - a small Bluesky bot that publishes hourly control-flow-graphs.</p><p>While technically simple, this bot is something I wanted to create for a few years now.
Originally, I wanted to write one that publishes <a href=https://hex-rays.com/ida-pro>IDA Pro</a> graphs of random functions in system binaries.
But due to logistical issues (how to run a bot that uses software I&rsquo;m only allowed to run on my own PC) and my concerns about copyright (can I freely post the disassembly of copyrighted software?) I never quite got around to it.</p><p>Despite those roadblocks, I kept wanting to share the visual wonder of control-flow-graphs with the world.
<img src=cfg.jpg alt="Large and many-branched control-flow-graph"></p><p>And a few days ago it dawned on me that now, after writing my <a href=https://tmr232.github.io/function-graph-overview/>control-flow-graph generator</a>, I can finally make this happen.
So I glued some pieces together, and here we are.</p><h2 id=a-bit-of-internals><a href=#a-bit-of-internals>A bit of internals<span hidden class=anchor aria-hidden=true href=#a-bit-of-internals>#</span></a></h2><p>The core of the bot is the <a href=https://github.com/tmr232/function-graph-overview/>function-graph-overview</a> project, used to generate the graphs themselves.
To choose what function to show every hour - I pre-process a corpus of source-code (currently - CPython&rsquo;s implementation and standard library, but more to come soon!) to get an index of all the functions in it.</p><p>The index contains basic information:</p><ul><li>Location of the function (filepath, location in the file)</li><li>Number of CFG nodes</li><li>The function definition (this accounts for overloads and anonymous functions better than function names)</li></ul><p>Then, on every run, I randomly select a function, biased slightly towards higher node-counts, as those are more interesting.</p><p>I then render this function to a PNG image, and post to Bluesky.</p><h3 id=high-res-images><a href=#high-res-images>High-res images<span hidden class=anchor aria-hidden=true href=#high-res-images>#</span></a></h3><p>The whole part described above was achieved rather easily (once I had the pieces!) using a bit of Python (to run the scripts and post to Bluesky) and Github-Actions (to &ldquo;host&rdquo; the bot and run it hourly).
But there is a problem - Bluesky only supports relatively small images.
And control-flow-graphs, especially the cool-looking ones, tend to be <em>very</em> large.</p><p>To resolve this, I added the <a href="https://tmr232.github.io/function-graph-overview/render/?github=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fblob%2F2bd5a7ab0f4a1f65ab8043001bd6e8416c5079bd%2FPython%2Fsymtable.c%23L1823&colors=dark"><code>/render/</code></a> page to function-graph-overview.
It takes a GitHub URL (one that includes a line number) as an argument, and renders the SVG in the browser (this way I don&rsquo;t need hosting for those images!).
I added basic panning and zooming to make it a tad more useful, and an option to download the SVG. Thus solving the fidelity issue with relative ease.</p></div><footer class=post-footer><ul class=post-tags></ul><div style=display:flex;justify-content:center class=discuss><a href=https://github.com/tmr232/tamir.dev/discussions/16 target=_blank rel="noopener noreferrer me" title="Discuss this post">Discuss this post<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="1em" style="margin-bottom:-.2em;margin-left:.2em"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://tamir.dev/>Tamir Bahar</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>